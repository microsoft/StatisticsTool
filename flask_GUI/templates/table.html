{% from "macros.html" import stat_print %}

<table id="table1">
       <head>
                <style>
                table {
                  border: 5px solid white;
                }

                th, td {
                  text-align: left;
                  padding: 8px;
                  font-family: Arial;
                }

                tr:nth-child(even){background-color: #f2f2f2}

                th {
                  background-color: #4CAF50;
                  color: white;
                  font-family: Arial;
                }
                </style>
       </head>



               {% if seg_num==0:%}
              <tr>
                    {% for stat_name in stats:%}
                        {% if stat_name.find('_comp')==-1:%}
                            <th> {{stat_name}} </th>
                        {%endif%}
                    {%endfor%}
              </tr>
              <tr>
                    {% for stat_name in stats:%}
                        
                        {% if stat_name.find('_comp')==-1:%}
                        <td> 
                            {{stat_print(stats, "", "", "", stat_name)}}
                            {%if stat_name+"_comp" in stats:%}
                                {{stat_print(stats, "", "", "", stat_name+"_comp")}}
                            {%endif%}
                        </td>
                        {%endif%}
                    {%endfor%}
              </tr>




               {% elif seg_num==1:%}
               <tr>
                    <th> Category </th>
                    <th> Statistics </th>
               </tr>
                    {% for row_name in rows:%}
                        <tr>
                            <th> {{row_name}} </th>
                                <td>
                                    {% for name in statistics_names:%}
                                    {{stat_print(stats, row_name, "", "", name)}}
                                    {%endfor%}
                                </td>
                        </tr>
                    {%endfor%}



               {% elif seg_num==2:%}
               <tr>
                    <th> </th>
                    {% for col_name in columns:%}
                        <th>{{col_name}}</th>
                    {%endfor%}
               </tr>

                  {% for row_name in rows:%}

                        <tr>
                        <th> {{row_name}} </th>
                        <td>
                            {% for name in statistics_names:%}
                              {{stat_print(stats, row_name, columns[0], "", name)}}
                            {%endfor%}
                        </td>
                        {% for i in range(1, columns|length):%}
                            <td>
                            {% for name in statistics_names:%}
                            {{stat_print(stats, row_name, columns[i], "", name)}}
                            {%endfor%}

                            </td>

                        {%endfor%}
                        </tr>
                  {%endfor%}



               {% else: %}

               <tr>
                    <th> </th>
                    <th>  </th>
                    {% for col_name in columns:%}
                        <th>{{col_name}}</th>
                    {%endfor%}
               </tr>

                  {% for row_name in rows:%}

                  <tr>

                        <th rowspan={{sub_rows|length}}>  {{row_name}} </th>
                        <td style=" background-color: #4CAF50; color: white;"> {{sub_rows[0]}} </td>
                        {% for i in range(columns|length): %}
                        <td>
                            {% for name in statistics_names: %}
                                {{stat_print(stats, row_name, columns[i], sub_rows[0], name)}}
                            {%endfor%}
                        </td>
                        {%endfor%}


                        {% for j in range(1, sub_rows|length): %}
                            <tr>
                            <td style=" background-color: #4CAF50; color: white;"> {{sub_rows[j]}} </td>
                            {% for i in range(columns|length): %}


                                <td>
                            {% for name in statistics_names:%}
                                 {{stat_print(stats, row_name, columns[i], sub_rows[j], name)}}
                            {%endfor%}
                                </td>

                            {%endfor%}
                            </tr>
                        {%endfor%}
                  </tr>
                  {%endfor%}
               {%endif%}
</table>



<form action="/stats?primary={{primary}}&secondary={{secondary}}&tertiary={{tertiary}}" method="post">
<button type="submit"> Save table </button>
</form>

{% if save_path:%}
<p style="font-family: Arial, Helvetica, sans-serif;"> Table was saved to: <br>
    {{save_path}} </p>
{%endif%}