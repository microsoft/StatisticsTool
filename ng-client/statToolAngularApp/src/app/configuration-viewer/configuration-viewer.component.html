<div class="configuration-container" *ngIf="newReportService.showConfigViewer">
    <div class="configuration-header">
        <div class="closeButton" (click)="close()">X</div>
        <div class="titleText">{{getTitle()}} </div>
    </div>
    <div class="configuration-content">
        <!-- Configuration Name -->
        <div class="row" style="width:100%;margin-bottom: 7px;">
          <div class="col">
            <div class="form-group">
              <label for="config_name" style="font-weight: bold">Configuration Name:</label>
              <input type="text" class="form-control form-control-sm" id="config_name" 
                    placeholder="" name="config_name" style="min-height: 0px !important;width:100%;padding-right: 10px;" 
                    minlength="3" required #nameInput="ngModel"
                    [(ngModel)]="newReportService.configName"
                    [ngClass]="{
                      'is-invalid': nameInput.invalid && nameInput.touched,
                      'is-valid': nameInput.valid && nameInput.touched
                    }"
                    >
            </div>
          </div>
        </div>
        <div class="report-container">
          <div class="report-caption">Report Creation</div>
          <!-- Log Names to Evaluate -->
          <div class="row" style="width:100%">
              <div class="col">
                <div class="form-group">
                  <label for="log_name" style="font-weight: bold">Log Names to Evaluate:</label>
                  <input type="text" class="form-control form-control-sm" id="log_name" 
                          [(ngModel)]="newReportService.logName"
                          placeholder="" name="log_name" style="min-height: 0px !important;" 
                          >
                </div>
              </div>
          </div>
          <!-- Prediction Reading Function -->
          <div class="row" style="width: 100%;padding-right: 0px !important;">
            <div class="col">
              <div class="form-group" style="width:105% !important">
                <label for="prediction_reading_function" style="font-weight: bold">Prediction Reading Function:</label>
                <div style="display: flex; align-items: center;">
                  <select class="form-select form-select-sm" 
                          id="prediction_reading_function" 
                          style="padding-right: 10px; width: 95%" 
                          (change)="onPredictionReadingFunctionChange($event)"
                          [(ngModel)]="newReportService.selectedPredictionReadingFunction" required #predictionReadingFunctionSelect="ngModel"
                          [ngClass]="{
                            'is-invalid': predictionReadingFunctionSelect.invalid && predictionReadingFunctionSelect.touched,
                            'is-valid': predictionReadingFunctionSelect.valid && predictionReadingFunctionSelect.touched
                          }">
                    <option *ngFor="let func of newReportService.prediction_reading_functions" [value]="func">{{func}}</option>
                  </select>
                  <img #readingFunctionImg 
                       [src]="getArgumentSvg('reading_functions')" 
                       (click)="showArgumentsPanel(readingFunctionImgElement,'reading_functions','Prediction Reading Function',newReportService.selectedPredictionReadingFunction)"
                       [ngStyle]="{'pointer-events': enableArgumentsButton('reading_functions') ? 'all' : 'none'}"
                       style="margin-left: 5px; cursor: pointer;" />
                </div>
              </div>
            </div>
          </div>
          <!-- GT Reading Function-->
          <div class="row" style="width: 100%">
            <div class="col">
              <div class="form-group" style="width:105% !important">
                <div style="display: flex; align-items: center;">
                  <input type="checkbox" 
                         style="margin-right: 3px;" 
                         [(ngModel)]="newReportService.gtReadingSameAsPrediction"
                         (ngModelChange)="checkboxChanged('gt_reading_functions')">
                  <label for="gt_reading_function" style="font-weight: bold">{{ getGtReadingLabel()}}</label>
                </div>
                <div style="display: flex; align-items: center;">
                  <select class="form-select form-select-sm"
                          id="gt_reading_function"
                          style="padding-right: 10px; width: 100%;"
                          (change)="onGTReadingFunctionChange($event)"
                          [(ngModel)]="newReportService.selectedGTReadingFunction" required #gtReadingFunctionSelect="ngModel"
                          [ngClass]="{
                            'is-invalid': gtReadingFunctionSelect.invalid && gtReadingFunctionSelect.touched,
                            'is-valid': gtReadingFunctionSelect.valid && gtReadingFunctionSelect.touched,
                            'enable-user-defined-function':!newReportService.gtReadingSameAsPrediction,
                            'disable-user-defined-function':newReportService.gtReadingSameAsPrediction
                          }" [disabled]="newReportService.gtReadingSameAsPrediction">
                    <option *ngFor="let func of newReportService.gt_reading_functions" [value]="func">{{func}}</option>
                  </select>
                  <img #gtReadingFunctionImg 
                       [src]="getArgumentSvg('gt_reading_functions')" 
                       (click)="showArgumentsPanel(gtReadingFunctionImgElement,'gt_reading_functions','GT Reading Function',newReportService.selectedGTReadingFunction)"
                       [ngStyle]="{'pointer-events': enableArgumentsButton('gt_reading_functions') ? 'all' : 'none'}"
                       style="margin-left: 5px; cursor: pointer;" />
                </div>
              </div>
            </div>
          </div>
          <!-- Association Function: -->
          <div class="row" style="width: 100%">
            <div class="col">
              <div class="form-group" style="width:105% !important">
                <div style="display: flex; align-items: center;">
                  <input type="checkbox" 
                         style="margin-right: 3px;" 
                         [(ngModel)]="newReportService.associationEnabled"
                         (ngModelChange)="checkboxChanged('association_functions')">
                  <label for="association_functions" style="font-weight: bold">Association Function:</label>
                </div>
                <div style="display: flex; align-items: center;">
                  <select class="form-select form-select-sm"
                          id="association_functions"
                          style="padding-right: 10px; width: 100%;"
                          (change)="onAssociationFunctionChange($event)"
                          [(ngModel)]="newReportService.selectedAssociationFunction" required #associationFunctionSelect="ngModel"
                          [ngClass]="{
                            'is-invalid': associationFunctionSelect.invalid && associationFunctionSelect.touched,
                            'is-valid': associationFunctionSelect.valid && associationFunctionSelect.touched,
                            'enable-user-defined-function': newReportService.associationEnabled,
                            'disable-user-defined-function': !newReportService.associationEnabled
                          }" [disabled]="!newReportService.associationEnabled">
                    <option *ngFor="let func of newReportService.association_functions" [value]="func">{{func}}</option>
                  </select>
                  <img #associationFunctionImg 
                       [src]="getArgumentSvg('association_functions')" 
                       (click)="showArgumentsPanel(associationFunctionImgElement,'association_functions','Association Function',newReportService.selectedAssociationFunction)"
                       [ngStyle]="{'pointer-events': enableArgumentsButton('association_functions') ? 'all' : 'none'}"
                       style="margin-left: 5px; cursor: pointer;" />
                </div>
              </div>
            </div>
          </div>
          <!-- Transform Function: -->
          <div class="row" style="width: 100%">
            <div class="col">
              <div class="form-group" style="width:105% !important">
                <div style="display: flex; align-items: center;">
                  <input type="checkbox" 
                         style="margin-right: 3px;" 
                         [(ngModel)]="newReportService.transformEnabled"
                         (ngModelChange)="checkboxChanged('transform_functions')">
                  <label for="transform_functions" style="font-weight: bold">Transform Function:</label>
                </div>
                <div style="display: flex; align-items: center;">
                  <select class="form-select form-select-sm"
                          id="transform_functions"
                          style="padding-right: 10px; width: 100%;"
                          [(ngModel)]="newReportService.selectedTransformFunction" required #transformFunctionSelect="ngModel"
                          (change)="onTransformFunctionChange($event)"
                          [ngClass]="{
                            'is-invalid': transformFunctionSelect.invalid && transformFunctionSelect.touched,
                            'is-valid': transformFunctionSelect.valid && transformFunctionSelect.touched,
                            'enable-user-defined-function': newReportService.transformEnabled,
                            'disable-user-defined-function': !newReportService.transformEnabled
                          }" [disabled]="!newReportService.transformEnabled">
                    <option *ngFor="let func of newReportService.transform_functions" [value]="func">{{func}}</option>
                  </select>
                  <img #transformFunctionImg 
                       [src]="getArgumentSvg('transform_functions')" 
                       (click)="showArgumentsPanel(transformFunctionImgElement,'transform_functions','Transform Function',newReportService.selectedAssociationFunction)"
                       [ngStyle]="{'pointer-events': enableArgumentsButton('transform_functions') ? 'all' : 'none'}"
                       style="margin-left: 5px; cursor: pointer;" />
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="report-container">
          <div class="report-caption">Report View</div>
          <!-- Partitioning Function: -->
          <div class="row" style="width: 100%">
            <div class="col">
              <div class="form-group">
                <label for="partitioning_function" style="font-weight: bold">Partitioning Function:</label>
                <div style="display: flex; align-items: center;">
                  <select class="form-select form-select-sm"
                          id="partitioning_function"
                          style="padding-right: 10px; width: 100%;"
                          [(ngModel)]="newReportService.selectedPartitioningFunction" required #partitFunctionSelect="ngModel"
                          [ngClass]="{
                            'is-invalid': partitFunctionSelect.invalid && partitFunctionSelect.touched,
                            'is-valid': partitFunctionSelect.valid && partitFunctionSelect.touched,
                            'enable-user-defined-function': newReportService.partitioningEnabled,
                            'disable-user-defined-function': !newReportService.partitioningEnabled
                          }" [disabled]="!newReportService.partitioningEnabled">
                    <option *ngFor="let func of newReportService.partitioning_functions" [value]="func">{{func}}</option>
                  </select>
                  <div style="display: flex; align-items: center;">
                    <label class="switch" style="margin-left: 10px">
                      <input type="checkbox" [(ngModel)]="newReportService.partitioningEnabled">
                      <span class="slider round"></span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- Confusion Function-->
          <div class="row" style="width:100%">
            <div class="col">
              <div class="form-group">
                <label for="confusion_function" style="font-weight: bold">Confusion Function:</label>
                    <select class="form-select form-select-sm" id="confusion_function" style="padding-right: 10px;width:100%"
                        [(ngModel)]="newReportService.selectedConfusionFunction" required #confusionFunctionSelect="ngModel"
                            [ngClass]="{
                                'is-invalid': confusionFunctionSelect.invalid && confusionFunctionSelect.touched,
                                'is-valid': confusionFunctionSelect.valid && confusionFunctionSelect.touched
                            }"
                        >
                        <option *ngFor="let func of newReportService.confusion_functions"
                                        value="{{func}}"
                                >{{func}}
                        </option>
                    </select>
              </div>
            </div>
          </div>       
          <!-- Statistics Function: -->
          <div class="row" style="width:100%">
              <div class="col">
                <div class="form-group">
                  <label for="statistics_function" style="font-weight: bold">Statistics Function:</label>
                      <select class="form-select form-select-sm" id="statistics_function" style="padding-right: 10px;width:100%"
                          [(ngModel)]="newReportService.selectedStatisticsFunction" required #statFunctionSelect="ngModel"
                          [ngClass]="{
                              'is-invalid': statFunctionSelect.invalid && statFunctionSelect.touched,
                              'is-valid': statFunctionSelect.valid && statFunctionSelect.touched
                          }"
                          >
                          <option *ngFor="let func of newReportService.statistics_functions"
                                          value="{{func}}"
                                  >{{func}}
                          </option>
                      </select>
                </div>
              </div>
          </div>
        </div>
    </div>
    <div class="form-footer">
        <button type="button" style="margin-bottom: 5px;"
                 class="btn btn btn-primary btn-mdcd" 
                 [disabled]="disableSaveButton()"
                 (click)="newReportService.saveConfig()">Save</button>
    </div>
</div>

<udf-arguments [top]="newReportService.argPanelTop" [left]="newReportService.argPanelLeft" [show]="newReportService.showParams">

</udf-arguments>